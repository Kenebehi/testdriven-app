---

  name: 'Sync S3 DAGs and settings'
  
  on:
    release:
      types:
        - published
  
  jobs:
    sync-dags:
      name: Copy DAGs to S3
      runs-on: ubuntu-latest
      steps:
        - name: Checkout repo
          uses: actions/checkout@v3
          with:
            fetch-depth: 0
        
        - name: Print event 
          id: prev_hash
          run: echo "$(git rev-list -n 1 $(git tag --sort=-creatordate | sed -n '2p'))"

        - name: Get changed Airflow  DAG's
          id: updated-dags-files
          uses: tj-actions/changed-files@v35
          with:
            base_sha: "9912b95466cd32958193d1259d18e4dce5431eb3"
            files: |
              airflow/dags/**
          


